<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4.1 Mixed Models vs. einzelne Regressionen | Mixed Models</title>
  <meta name="description" content="4.1 Mixed Models vs. einzelne Regressionen | Mixed Models" />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="4.1 Mixed Models vs. einzelne Regressionen | Mixed Models" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4.1 Mixed Models vs. einzelne Regressionen | Mixed Models" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="randomslopes.html">
<link rel="next" href="simulationen-1.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="first-things-first.html"><a href="first-things-first.html"><i class="fa fa-check"></i><b>1</b> First Things First</a><ul>
<li class="chapter" data-level="1.1" data-path="uberblick.html"><a href="uberblick.html"><i class="fa fa-check"></i><b>1.1</b> Überblick</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="exkurs-regressionen.html"><a href="exkurs-regressionen.html"><i class="fa fa-check"></i><b>2</b> Exkurs Regressionen</a><ul>
<li class="chapter" data-level="2.1" data-path="averaging-ist-eine-least-squares-regression.html"><a href="averaging-ist-eine-least-squares-regression.html"><i class="fa fa-check"></i><b>2.1</b> Averaging ist eine Least-Squares Regression</a></li>
<li class="chapter" data-level="2.2" data-path="von-averaging-zur-regression.html"><a href="von-averaging-zur-regression.html"><i class="fa fa-check"></i><b>2.2</b> Von Averaging zur Regression</a></li>
<li class="chapter" data-level="2.3" data-path="pradiktoren-definieren.html"><a href="pradiktoren-definieren.html"><i class="fa fa-check"></i><b>2.3</b> Prädiktoren definieren</a></li>
<li class="chapter" data-level="2.4" data-path="codinginr.html"><a href="codinginr.html"><i class="fa fa-check"></i><b>2.4</b> Variablenkodierung in R</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="random-intercept-models.html"><a href="random-intercept-models.html"><i class="fa fa-check"></i><b>3</b> Random intercept models</a><ul>
<li class="chapter" data-level="3.1" data-path="generelle-logik.html"><a href="generelle-logik.html"><i class="fa fa-check"></i><b>3.1</b> Generelle Logik</a></li>
<li class="chapter" data-level="3.2" data-path="in-r.html"><a href="in-r.html"><i class="fa fa-check"></i><b>3.2</b> in R</a></li>
<li class="chapter" data-level="3.3" data-path="simulationen.html"><a href="simulationen.html"><i class="fa fa-check"></i><b>3.3</b> Simulationen</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="randomslopes.html"><a href="randomslopes.html"><i class="fa fa-check"></i><b>4</b> Random slope models</a><ul>
<li class="chapter" data-level="4.1" data-path="mixed-models-vs-einzelne-regressionen.html"><a href="mixed-models-vs-einzelne-regressionen.html"><i class="fa fa-check"></i><b>4.1</b> Mixed Models vs. einzelne Regressionen</a></li>
<li class="chapter" data-level="4.2" data-path="simulationen-1.html"><a href="simulationen-1.html"><i class="fa fa-check"></i><b>4.2</b> Simulationen</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="referenzen.html"><a href="referenzen.html"><i class="fa fa-check"></i>Referenzen</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Mixed Models</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="mixed-models-vs.-einzelne-regressionen" class="section level2">
<h2><span class="header-section-number">4.1</span> Mixed Models vs. einzelne Regressionen</h2>
<p>Mixed Models und Regressionen pro Cluster oder über die gesamte Stichprobe hinweg unterscheiden sich hinsichtlich der Informationen, die sie berücksichtigen. Das standard Regressionsmodell ignoriert Cluster völlig, poolt also alle Daten (<span style=" font-weight: bold;    color: #6BBFA6 !important;">Complete pooling</span>). <span style=" font-weight: bold;    color: #6BBFA6 !important;">Gar kein pooling</span> hat man bei der Herangehensweise mit den einzelnen Regressionen pro Student bzw. einer Regression mit Interaktionsterm; die overall Effekte bleiben unberücksichtigt. Was bei mixed Models passiert ist <span style=" font-weight: bold;    color: #6BBFA6 !important;">partial pooling</span>, weil die Unterschiede zwischen den Clustern berücksichtigt werden, aber auch die Ähnlichkeit zwischen den Clustern geschätzt wird. Dabei informieren die gepoolten Daten über alle Observations hinweg die Schätzung der Cluster.</p>
<div id="regularisierende-effekte" class="section level3">
<h3><span class="header-section-number">4.1.1</span> Regularisierende Effekte</h3>
<p>Der Vergleich mit einer einzelnen Regression pro Student liegt nahe. Dieser Code führt separate Regressionen pro Student durch. Aus der Beschreibung von <code>lmList</code>, scheinbar eine ziemlich lustige Funktion: “Fit a list of <code>lm</code> or <code>glm</code> objects with a common model for different subgroups of the data.”</p>
<pre class="sourceCode r"><code class="sourceCode r">gpa_lm_by_group &lt;-<span class="st"> </span><span class="kw">lmList</span>(gpa <span class="op">~</span><span class="st"> </span>occasion <span class="op">|</span><span class="st"> </span>student, gpa)</code></pre>
<p>Dabei ist die Regression pro Gruppe genau dasselbe wie eine lineare Regression mit Interaktionsterm. Ein bisschen hässlich in den Densityplots, aber die Regression mit Interaktion und die pro Gruppe überlappen exakt.</p>
<pre class="sourceCode r"><code class="sourceCode r">lm_regr &lt;-<span class="st"> </span><span class="kw">lm</span>(gpa <span class="op">~</span><span class="st"> </span>occasion<span class="op">*</span>student, <span class="dt">data =</span> gpa)</code></pre>
<p><img src="01_1_first_things_first_files/figure-html/unnamed-chunk-56-1.png" width="672" /></p>
<p><img src="01_1_first_things_first_files/figure-html/unnamed-chunk-57-1.png" width="672" /></p>
<p>Auch in den zusätzlichen Plots basierend auf Simulationen, <a href="https://m-clark.github.io/mixed-models-with-R/random_slopes.html#comparison-to-many-regressions">die Clark bastelt</a>, wird die Hauptmessage deutlich:</p>
<p>Mixed Models <span style=" font-weight: bold;    color: #E8793A !important;"> regularisieren</span>, d.h.:
- <span style=" font-weight: bold;    color: #6BBFA6 !important;">Intercepts</span> und <span style=" font-weight: bold;    color: #6BBFA6 !important;">Slopes</span> von mixed Models und tummeln sich <span style=" font-weight: bold;    color: #6BBFA6 !important;">stärker um den overall Effect</span>.
- Im Vergleich zu einer Regression pro Cluster/mit Interaktion besteht weniger Unsicherheit über Intercept und Slope.
- Mixed Models <span style=" font-weight: bold;    color: #6BBFA6 !important;">verhindern Overfitting</span>. Das würde nämlich passieren, wenn man nur den Effekt innerhalb der Cluster betrachtet, ohne den overall Effect zu berücksichtigen.</p>
<p>Je stärker der Effekt der Subgruppen, desto größer die Unsicherheit über den overall Effect.</p>
<p>Mixed Models regularisieren <span style=" font-weight: bold;    color: #E8793A !important;">weniger</span> (liegen also weiter weg vom overall Effect und drücken mehr Unsicherheit aus), wenn …
- … es mehr Information pro Cluster gibt.
- mehr Beobachtungen pro Cluster
- mehr Varianz in den random Effects (d.h. den Effekten pro Cluster)</p>
<p>Mixed Models wirken auch dann regularisierend, wenn die Daten <span style=" font-weight: bold;    color: #E8793A !important;">unbalanciert</span> sind. Das Beispiel war hier: Mehr Messzeitpunkte pro Student, aber es gibt Dropout über die Zeit hinweg. Die Datenmenge ist also etwa dieselbe, aber zu späteren Messzeitpunkten sind weniger Daten vorhanden als zu früheren. Auch hier liegt das mixed Model näher am overall Effect als die Regression pro Gruppe/mit Interaktion.</p>
</div>
<div id="predictions" class="section level3">
<h3><span class="header-section-number">4.1.2</span> Predictions</h3>
<p>Spannend wird es, wenn man die Vorhersagen der beiden Herangehensweisen (mixed model vs. einzelne Regressionen) visualisiert:</p>
<p><img src="01_1_first_things_first_files/figure-html/unnamed-chunk-58-1.png" width="672" /></p>
<p>Jetzt der Vergleich der Predictions der jeweiligen Modelle. Farblich kodiert werden
Predictions aufwärts vs. abwärts. Gehighlighted sind im Folgenden immer dieselben sechs Studenten; drei, die im mixed Model einen Aufwärtstrend zeigen und drei, die im mixed Model einen Abwärtstrend zeigen (das sind dort eh nur drei). In Dunkelgrün die overall Regressionslinie.</p>
<p><img src="01_1_first_things_first_files/figure-html/unnamed-chunk-59-1.png" width="672" /></p>
<p>Im Vergleich dazu die Predictions der Regression pro Student und der Regression mit Interaktion Occasion <span class="math inline">\(\times\)</span> Student: Beides ist exakt dasselbe.</p>
<p><img src="01_1_first_things_first_files/figure-html/unnamed-chunk-60-1.png" width="672" /></p>
<p><img src="01_1_first_things_first_files/figure-html/unnamed-chunk-61-1.png" width="672" /></p>
<p>Ich möchte Clarks Summary hier zitieren: “At this point it might be clearer why some would call these richly parameterized linear models. Relative to a standard regression we get extra variance parameters that add to our understanding of the sources of uncertainty in the model, we can get the subjects specific effects, and their correlation, and use that information to obtain far better predictions. What’s not to like?”</p>
<p><span class="math inline">\(\to\)</span> Siehe Skript uebungen.R – Übung #4 für random Intercepts und random Slopes angewendet auf die Sleep-Daten.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="randomslopes.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="simulationen-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": 3,
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": false
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
